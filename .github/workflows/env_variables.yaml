name: GitHub Env. Variables
on:
  push:
    branches:
      - master
    paths-ignore:
      - '**/README.md'    
jobs:

  job_start: 
    runs-on: ubuntu-latest
    env:
      GLOB_ENV_VAR: Global Var
        
    defaults:
      run:
        shell: bash
    steps:
      - name: "Execute if it's a correct GLOB_ENV_VAR"
        if: ${{ env.GLOB_ENV_VAR == 'Global Var' }}
        run: |
          echo "SERVER_URL=$GITHUB_SERVER_URL REPOSITORY=$GITHUB_REPOSITORY WORKFLOW=$GITHUB_WORKFLOW EVENT_NAME=$GITHUB_EVENT_NAME REF=$GITHUB_REF WORKSPACE=$GITHUB_WORKSPACE"
          echo "RUN_ID=$GITHUB_RUN_ID RUN_NUMBER=$GITHUB_RUN_NUMBER JOB=$GITHUB_JOB ACTION=$GITHUB_ACTION"
          echo "GLOB_ENV_VAR=${{ env.GLOB_ENV_VAR }} LOCAL_ENV_VAR=$LOCAL_ENV_VAR"
        env:
          LOCAL_ENV_VAR: Local Var
      - name: "Will not be executed for wrong GLOB_ENV_VAR"
        if: ${{ env.GLOB_ENV_VAR == 'Error' }}
        run: echo "Nothing"
        
  job_end:
    needs: job_start
    runs-on: ubuntu-latest
    defaults:
      run:
        shell: bash
        
    steps:
      - name: "Complete job"
        if: ${{ env.GLOB_ENV_VAR == 'Global Var' }}
        run: |
          echo "GLOB_ENV_VAR=${{ env.GLOB_ENV_VAR }} LOCAL_ENV_VAR=$LOCAL_ENV_VAR"
          ls ${{ github.workspace }}
